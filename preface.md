# 前言

金融危机使外贸出口深受打击,同时也让出口企业更加迫切地希望寻找出解决方案以应对困 境。相比实体经济的不景气,以 eBay、淘宝为首的电子商务模式,却异军突起,交易额稳步提升, 这正为外贸企业提供了良好借鉴。 搭建电子商务平台,不仅减少了交易成本、运营成本,运用现 代化的通讯工具,使距离不再遥远,提升了公司形象、服务水准,更加提升了用户真诚度。

osCommerce 是一套 PHP 开源项目,旨在提供一套完整的企业 B2C 解决方案,尤其适用于外 贸出口型企业。由于它在提供了外贸所需的全部功能,更加安全可靠,并且具有很好的兼容性,操 作简便,因此在全球范围拥有众多的使用者,同时由于它良好的架构,很多 B2C 项目都借鉴了它 的思路,有一些项目甚至是基于它扩展/改良而来,其中包括了 zenCart。

尽管 osCommerce 如此优秀,值得我们去学习和掌握它,但国内深入探讨 B2C 开源项目的书 籍太少,这就使得需要深入了解 osCommerce 变得非常困难。

本书是作者在实际工作中的经验总结,希望读者阅读完此书后,能够对 osCommerce 的开发全 面掌握,同时对 B2C 模式有一个更加深入的认识。

## 读者对象

这本书主要是为了中到高级水平的 PHP 程序员编写。尽管不同层次的程序员都能从中获益, 不过我们会以很快的进度深入讨论,因此预先对 PHP 有一定了解还是很有必要的。

本书所讨论的主题是采用 osCommerce 开源项目的电子商务 B2C 模式(读者需要对 osCommerce 有一定了解,osCommerce 的基本操作请参考其他书籍),对于 B2C 所涉及的重要概念,书中都有 重点讲解同时对实现代码进行了深入分析,同时着重讲解了如何编写自定义模块。

如果你是 PHP 程序员,现正进行 osCommerce(或者基于 osCommerce 的所有系统,如 zenCart 等)开发、或正进 行 B2C 模式研究、又或者对 B2C 模式感兴趣,本书对你将非常有帮助。

本书还对Paypal在线支付技术、Paypal IPN进行了详细介绍,对Paypal开发有疑问的读者可 以参考本书。

## 本书结构

第一章,概述。

    首先对 osCommerce 开源项目的历史、功能特性进行了简单介绍,然后便开始 对 osCommerce 系统的多语种、多币种以及支持税率计算等特性进行了分析,最后对用户的付款流 程的情况进行了说明。

第二章,运输模块。

    针对运输模块进行了充分的探讨,通过由浅入深的讲解,从开始的如何安
装运输模块、配置运输模块,再到透过一段段代码分析出运输模块的运行原理,最后通过编写实际 的运输模块来巩固对运输模块的认识,因为在编写的运输模块里运用到了 Web Service 技术,所以 在章节的最后对 PHP 里调用 Web Service 的方法进行了说明。

第三章,付款模块。

    介绍 osCommerce 里的另一个重要模块:付款模块,透过 Paypal 网站付款 标准版模块了解了付款模块的主要参数与特殊性,然后对付款模块的原理进行了深入的分析,对在 线支付模块的特点加以重点说明和区分。本章还加入了 Paypal IPN(即时付款通知)的介绍,最后 通过介绍如何编写网银在线付款模块让读者了解编写付款模块的过程。

第四章,统计模块。

    介绍了 osCommerce 里统计模块的作用,分析了付款流程中统计模块的运 行原理。然后介绍如何自行编写统计模块。

第五章,URL SEO方法比较。

    对URL SEO优化进行探讨,首先通过分析osCommerce插件 Ultimate SEO URLs 的工作方式,了解到其运行原理与执行效率,其中包括了对 Ultimate SEO URLs 插件的安装、配置的说明。然后介绍如何对 URL 进行 SEO 优化改造,最后通过编写自定义的 Url_Ruler 类来解决 URL SEO 难题。

第六章,osCommerce 的模板化改造。

    探讨 osCommerce 的模板化改造,介绍了著名的 STS 模 板插件,以及 BTS 模板插件,并对两者的原理进行了分析说明,了解到它们的差别点。最后介绍 实现 Smarty 模板改造的过程,以及 Smarty Plugin 插件的编写。

第七章,osCommerce 基础。

    了解 osCommerce 的基础类库、函数库以及全局的使用,最后讲 解 osCommerce 数据库结构以及数据库关系。

第八章,osCommerce 技巧。

    介绍 osCommerce 技巧,包括了图片防盗链、Open Search 搜索支 援、更改产品列表样式等实用技巧。

第九章,特色模块。

    介绍 osCommerce 特色模块,其中包括管理产品利器 Easy Populate、订单 编辑插件Order Edit和图片显示效果Lightbox等,同时针对每个模块的安装与配置进行了相关讲解。 

第十章,osCommerce V3。

    认识最新版本的 osCommerce V3,介绍了 osCommerce V3 新特性、    新的目录结构与文件组织形式、新的数据库结构。

    然后分章节对新版本里的 Template 模板系统、 动作Action、服务Service、缓存等进行了详细介绍和分析,同时针对osCommerce RC 2.2系统, 对新的模块/内容框、运输模块、付款模块以及语言文件等进行了对比分析。

    介绍了产品多图片扩 展、产品选项多样化、重量单位换算等新特性的工作原理,以及数据查询类的使用方法。

    在章节最 后讲解了管理后台的 MVC 结构与原理以及 RPC 远程过程调用的实现原理。

第十一章,附录。

    对国家代码、货币代码、Paypal 付款参数以及 Paypal IPN 参数进行了摘录

尽管希望将此书编写到最完美,但亦难免会有不尽如人意之处。如果书中出现错误都是我一人所造成的,是我一人之过。