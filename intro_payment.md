## 付款流程介绍

osCommerce 支付的流程是:

1. 用户选择发货方式/物流方式(shipping method),选择不同的发货方式将会自动计算出相应的
发货费用(shipping cost),订单统计里会增加相应的费用,订单总金额也会相应地增加。另 外不同的收货地址通常导致发货费用也会不一样。

  负责发货方式的相关页面有:
  - checkout_shipping.php:负责处理选择发货方式
  - includes/classes/shipping.php: Shipping 发货方式类负责运输模块的管理
  - checkout_shipping_address.php:负责处理变更收货地址

2. 选择付款方式(payment method),也就是用户将以哪种方式支付他的订单。

  如果启用了付款统计模块,可以在订单统计一栏增加一项付款方式的费用(通常是针对某种付款方式给予折 扣,即费用为负值),订单总金额便会相应地变化。

  负责付款方式的相关页面有:
  - checkout_payment.php:负责处理选择付款方式
  - includes/classes/payment.php:payment付款方式类负责管理所有付款模块
  - checkout_payment_address.php:负责处理变更账单地址

3. 用户确认付款信息,在这个步骤里,将显示用户的收货地址、账单地址、发货方式、付款方式,订单产品与统计,以及总金额等内容。同时允许用户变更所有的选项。

  与之相关的页面有:
  - checkout_confirmation.php文件负责处理付款确认
  
4. 当用户确认其订单后,依照用户所选择的付款方式,会出现两种情况,如果选择的是线下支付(如银行转账、西联汇款等)将会直接转入到结算成功页面,提示用户对应的付款方式该如何进行付款(包括必要的收款人信息)。

  如果是在线支付形式,将直接跳转到在线支付网关,由用户在相应的支付平台进行付款后, 再返回到结算成功页面。

  与之相关的页面有:

  - checkout_process.php:负责处理订单的生成,如果选择的是在线支付方式,订单的生成 将由付款模块自行处理
  - checkout_success.php:显示结算成功的祝贺信息,如果是线下支付方式,将提示用户如 何进行付款